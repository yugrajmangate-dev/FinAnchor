import React, { useState, useEffect } from 'react';
import { useTranslation } from 'react-i18next';
import './LanguageSelector.css';

function LanguageSelector() {
  const { i18n } = useTranslation();
  const [selectedLanguage, setSelectedLanguage] = useState('en');
  const [audioEnabled, setAudioEnabled] = useState(true);

  const languages = [
    { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸', voice: 'en-US' },
    { code: 'hi', name: 'à¤¹à¤¿à¤‚à¤¦à¥€', flag: 'ğŸ‡®ğŸ‡³', voice: 'hi-IN' },
    { code: 'ta', name: 'à®¤à®®à®¿à®´à¯', flag: 'ğŸ‡®ğŸ‡³', voice: 'ta-IN' },
    { code: 'te', name: 'à°¤à±†à°²à±à°—à±', flag: 'ğŸ‡®ğŸ‡³', voice: 'te-IN' },
    { code: 'kn', name: 'à²•à²¨à³à²¨à²¡', flag: 'ğŸ‡®ğŸ‡³', voice: 'kn-IN' },
    { code: 'ml', name: 'à´®à´²à´¯à´¾à´³à´‚', flag: 'ğŸ‡®ğŸ‡³', voice: 'ml-IN' },
    { code: 'bn', name: 'à¦¬à¦¾à¦‚à¦²à¦¾', flag: 'ğŸ‡®ğŸ‡³', voice: 'bn-IN' },
    { code: 'mr', name: 'à¤®à¤°à¤¾à¤ à¥€', flag: 'ğŸ‡®ğŸ‡³', voice: 'mr-IN' },
    { code: 'gu', name: 'àª—à«àªœàª°àª¾àª¤à«€', flag: 'ğŸ‡®ğŸ‡³', voice: 'gu-IN' },
    { code: 'pa', name: 'à¨ªà©°à¨œà¨¾à¨¬à©€', flag: 'ğŸ‡®ğŸ‡³', voice: 'pa-IN' }
  ];

  const changeLanguage = (languageCode) => {
    setSelectedLanguage(languageCode);
    i18n.changeLanguage(languageCode);
    localStorage.setItem('selectedLanguage', languageCode);

    // Update speech synthesis voice
    if (audioEnabled && 'speechSynthesis' in window) {
      const language = languages.find(lang => lang.code === languageCode);
      if (language) {
        const voices = speechSynthesis.getVoices();
        const voice = voices.find(v => v.lang === language.voice);
        if (voice) {
          localStorage.setItem('selectedVoice', language.voice);
        }
      }
    }
  };

  const toggleAudio = () => {
    setAudioEnabled(!audioEnabled);
    localStorage.setItem('audioEnabled', (!audioEnabled).toString());
  };

  const playAudioGuide = (section) => {
    if (!audioEnabled || !('speechSynthesis' in window)) return;

    const text = getAudioGuideText(section);
    const utterance = new SpeechSynthesisUtterance(text);

    // Set voice based on selected language
    const voices = speechSynthesis.getVoices();
    const language = languages.find(lang => lang.code === selectedLanguage);
    if (language) {
      const voice = voices.find(v => v.lang === language.voice);
      if (voice) {
        utterance.voice = voice;
      }
    }

    utterance.rate = 0.9;
    utterance.pitch = 1;

    speechSynthesis.speak(utterance);
  };

  const getAudioGuideText = (section) => {
    const guides = {
      dashboard: {
        en: "Welcome to your credit dashboard. Here you can see your credit score, loan eligibility, and financial insights. Use the navigation menu to explore different features.",
        hi: "à¤†à¤ªà¤•à¥‡ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡ à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆà¥¤ à¤¯à¤¹à¤¾à¤‚ à¤†à¤ª à¤…à¤ªà¤¨à¤¾ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¸à¥à¤•à¥‹à¤°, à¤‹à¤£ à¤ªà¤¾à¤¤à¥à¤°à¤¤à¤¾ à¤”à¤° à¤µà¤¿à¤¤à¥à¤¤à¥€à¤¯ à¤…à¤‚à¤¤à¤°à¥à¤¦à¥ƒà¤·à¥à¤Ÿà¤¿ à¤¦à¥‡à¤– à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤µà¤¿à¤­à¤¿à¤¨à¥à¤¨ à¤¸à¥à¤µà¤¿à¤§à¤¾à¤“à¤‚ à¤•à¤¾ à¤ªà¤¤à¤¾ à¤²à¤—à¤¾à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤¨à¥‡à¤µà¤¿à¤—à¥‡à¤¶à¤¨ à¤®à¥‡à¤¨à¥‚ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚à¥¤",
        ta: "à®‰à®™à¯à®•à®³à¯ à®•à®¿à®°à¯†à®Ÿà®¿à®Ÿà¯ à®Ÿà®¾à®·à¯à®ªà¯‹à®°à¯à®Ÿà¯à®•à¯à®•à¯ à®µà®°à®µà¯‡à®±à¯à®•à®¿à®±à¯‹à®®à¯. à®‡à®™à¯à®•à¯‡ à®‰à®™à¯à®•à®³à¯ à®•à®¿à®°à¯†à®Ÿà®¿à®Ÿà¯ à®¸à¯à®•à¯‹à®°à¯, à®•à®Ÿà®©à¯ à®¤à®•à¯à®¤à®¿ à®®à®±à¯à®±à¯à®®à¯ à®¨à®¿à®¤à®¿ à®¨à¯à®£à¯à®£à®±à®¿à®µà¯à®•à®³à¯ˆà®ªà¯ à®ªà®¾à®°à¯à®•à¯à®•à®²à®¾à®®à¯. à®µà¯†à®µà¯à®µà¯‡à®±à¯ à®…à®®à¯à®šà®™à¯à®•à®³à¯ˆ à®†à®°à®¾à®¯ à®¨à¯‡à®µà®¿à®•à¯‡à®·à®©à¯ à®®à¯†à®©à¯à®µà¯ˆà®ªà¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯.",
        te: "à°®à±€ à°•à±à°°à±†à°¡à°¿à°Ÿà± à°¡à±à°¯à°¾à°·à±à°¬à±‹à°°à±à°¡à±â€Œà°•à± à°¸à±à°µà°¾à°—à°¤à°‚. à°‡à°•à±à°•à°¡ à°®à±€à°°à± à°®à±€ à°•à±à°°à±†à°¡à°¿à°Ÿà± à°¸à±à°•à±‹à°°à±, à°²à±‹à°¨à± à°…à°°à±à°¹à°¤ à°®à°°à°¿à°¯à± à°†à°°à±à°¥à°¿à°• à°…à°‚à°¤à°°à±à°¦à±ƒà°·à±à°Ÿà±à°²à°¨à± à°šà±‚à°¡à°µà°šà±à°šà±. à°µà°¿à°µà°¿à°§ à°²à°•à±à°·à°£à°¾à°²à°¨à± à°…à°¨à±à°µà±‡à°·à°¿à°‚à°šà°¡à°¾à°¨à°¿à°•à°¿ à°¨à°¾à°µà°¿à°—à±‡à°·à°¨à± à°®à±†à°¨à±à°¨à± à°‰à°ªà°¯à±‹à°—à°¿à°‚à°šà°‚à°¡à°¿.",
        kn: "à²¨à²¿à²®à³à²® à²•à³à²°à³†à²¡à²¿à²Ÿà³ à²¡à³à²¯à²¾à²¶à³â€Œà²¬à³‹à²°à³à²¡à³â€Œà²—à³† à²¸à³à²µà²¾à²—à²¤. à²‡à²²à³à²²à²¿ à²¨à³€à²µà³ à²¨à²¿à²®à³à²® à²•à³à²°à³†à²¡à²¿à²Ÿà³ à²¸à³à²•à³‹à²°à³, à²¸à²¾à²² à²ªà²¾à²¤à³à²°à²¤à³† à²®à²¤à³à²¤à³ à²¹à²£à²•à²¾à²¸à³ à²’à²³à²¨à³‹à²Ÿà²—à²³à²¨à³à²¨à³ à²¨à³‹à²¡à²¬à²¹à³à²¦à³. à²µà²¿à²µà²¿à²§ à²µà³ˆà²¶à²¿à²·à³à²Ÿà³à²¯à²—à²³à²¨à³à²¨à³ à²…à²¨à³à²µà³‡à²·à²¿à²¸à²²à³ à²¨à³à²¯à²¾à²µà²¿à²—à³‡à²·à²¨à³ à²®à³†à²¨à³à²µà²¨à³à²¨à³ à²¬à²³à²¸à²¿.",
        ml: "à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´•àµà´°àµ†à´¡à´¿à´±àµà´±àµ à´¡à´¾à´·àµà´¬àµ‹àµ¼à´¡à´¿à´²àµ‡à´•àµà´•àµ à´¸àµà´µà´¾à´—à´¤à´‚. à´‡à´µà´¿à´Ÿàµ† à´¨à´¿à´™àµà´™àµ¾à´•àµà´•àµ à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´•àµà´°àµ†à´¡à´¿à´±àµà´±àµ à´¸àµà´•àµ‹àµ¼, à´²àµ‹àµº à´…àµ¼à´¹à´¤, à´§à´¨à´•à´¾à´°àµà´¯ à´‰àµ¾à´•àµà´•à´¾à´´àµà´šà´•àµ¾ à´à´¨àµà´¨à´¿à´µ à´•à´¾à´£à´¾à´‚. à´µà´¿à´µà´¿à´§ à´¸à´µà´¿à´¶àµ‡à´·à´¤à´•àµ¾ à´ªà´°àµà´¯à´µàµ‡à´•àµà´·à´£à´‚ à´šàµ†à´¯àµà´¯à´¾àµ» à´¨à´¾à´µà´¿à´—àµ‡à´·àµ» à´®àµ†à´¨àµ à´‰à´ªà´¯àµ‹à´—à´¿à´•àµà´•àµà´•.",
        bn: "à¦†à¦ªà¦¨à¦¾à¦° à¦•à§à¦°à§‡à¦¡à¦¿à¦Ÿ à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡à§‡ à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®à¥¤ à¦à¦–à¦¾à¦¨à§‡ à¦†à¦ªà¦¨à¦¿ à¦†à¦ªà¦¨à¦¾à¦° à¦•à§à¦°à§‡à¦¡à¦¿à¦Ÿ à¦¸à§à¦•à§‹à¦°, à¦‹à¦£ à¦¯à§‹à¦—à§à¦¯à¦¤à¦¾ à¦à¦¬à¦‚ à¦†à¦°à§à¦¥à¦¿à¦• à¦…à¦¨à§à¦¤à¦°à§à¦¦à§ƒà¦·à§à¦Ÿà¦¿ à¦¦à§‡à¦–à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¦¨à¥¤ à¦¬à¦¿à¦­à¦¿à¦¨à§à¦¨ à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯ à¦…à¦¨à§à¦¬à§‡à¦·à¦£ à¦•à¦°à¦¤à§‡ à¦¨à§‡à¦­à¦¿à¦—à§‡à¦¶à¦¨ à¦®à§‡à¦¨à§ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§à¦¨à¥¤",
        mr: "à¤¤à¥à¤®à¤šà¥à¤¯à¤¾ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¡à¥…à¤¶à¤¬à¥‹à¤°à¥à¤¡à¤®à¤§à¥à¤¯à¥‡ à¤¸à¥à¤µà¤¾à¤—à¤¤. à¤¯à¥‡à¤¥à¥‡ à¤¤à¥à¤®à¥à¤¹à¥€ à¤¤à¥à¤®à¤šà¤¾ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¸à¥à¤•à¥‹à¤…à¤°, à¤•à¤°à¥à¤œ à¤ªà¤¾à¤¤à¥à¤°à¤¤à¤¾ à¤†à¤£à¤¿ à¤†à¤°à¥à¤¥à¤¿à¤• à¤…à¤‚à¤¤à¤°à¥à¤¦à¥ƒà¤·à¥à¤Ÿà¥€ à¤ªà¤¾à¤¹à¥‚ à¤¶à¤•à¤¤à¤¾. à¤µà¤¿à¤µà¤¿à¤§ à¤µà¥ˆà¤¶à¤¿à¤·à¥à¤Ÿà¥à¤¯à¥‡ à¤à¤•à¥à¤¸à¤ªà¥à¤²à¥‹à¤° à¤•à¤°à¤£à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤¨à¥‡à¤µà¥à¤¹à¤¿à¤—à¥‡à¤¶à¤¨ à¤®à¥‡à¤¨à¥‚ à¤µà¤¾à¤ªà¤°à¤¾.",
        gu: "àª¤àª®àª¾àª°àª¾ àª•à«àª°à«‡àª¡àª¿àªŸ àª¡à«‡àª¶àª¬à«‹àª°à«àª¡àª®àª¾àª‚ àª¸à«àªµàª¾àª—àª¤ àª›à«‡. àª…àª¹à«€àª‚ àª¤àª®à«‡ àª¤àª®àª¾àª°à«‹ àª•à«àª°à«‡àª¡àª¿àªŸ àª¸à«àª•à«‹àª°, àª²à«‹àª¨ àªªàª¾àª¤à«àª°àª¤àª¾ àª…àª¨à«‡ àª¨àª¾àª£àª¾àª•à«€àª¯ àª†àª‚àª¤àª°àª¦à«ƒàª·à«àªŸàª¿ àªœà«‹àªˆ àª¶àª•à«‹ àª›à«‹. àªµàª¿àªµàª¿àª§ àª¸à«àªµàª¿àª§àª¾àª“àª¨à«àª‚ àª…àª¨à«àªµà«‡àª·àª£ àª•àª°àªµàª¾ àª¨à«‡àªµàª¿àª—à«‡àª¶àª¨ àª®à«‡àª¨à«‚àª¨à«‹ àª‰àªªàª¯à«‹àª— àª•àª°à«‹.",
        pa: "à¨¤à©à¨¹à¨¾à¨¡à©‡ à¨•à©à¨°à©ˆà¨¡à¨¿à¨Ÿ à¨¡à©ˆà¨¸à¨¼à¨¬à©‹à¨°à¨¡ à¨µà¨¿à©±à¨š à¨¸à¨µà¨¾à¨—à¨¤ à¨¹à©ˆà¥¤ à¨‡à©±à¨¥à©‡ à¨¤à©à¨¸à©€à¨‚ à¨†à¨ªà¨£à¨¾ à¨•à©à¨°à©ˆà¨¡à¨¿à¨Ÿ à¨¸à¨•à©‹à¨°, à¨²à©‹à¨¨ à¨…à¨°à¨œà¨¼à©€à¨¤à¨¾ à¨…à¨¤à©‡ à¨µà¨¿à©±à¨¤à©€ à¨¸à©‚à¨ à¨¦à©‡à¨– à¨¸à¨•à¨¦à©‡ à¨¹à©‹à¥¤ à¨µà©±à¨–-à¨µà©±à¨– à¨µà¨¿à¨¸à¨¼à©‡à¨¸à¨¼à¨¤à¨¾à¨µà¨¾à¨‚ à¨¦à©€ à¨ªà©œà¨šà©‹à¨² à¨•à¨°à¨¨ à¨²à¨ˆ à¨¨à©‡à¨µà©€à¨—à©‡à¨¸à¨¼à¨¨ à¨®à©‡à¨¨à©‚ à¨¦à©€ à¨µà¨°à¨¤à©‹à¨‚ à¨•à¨°à©‹à¥¤"
      },
      creditScore: {
        en: "Your credit score represents your creditworthiness. Higher scores mean better loan terms. Monitor your score regularly and work on improving it.",
        hi: "à¤†à¤ªà¤•à¤¾ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¸à¥à¤•à¥‹à¤° à¤†à¤ªà¤•à¥€ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¯à¥‹à¤—à¥à¤¯à¤¤à¤¾ à¤•à¥‹ à¤¦à¤°à¥à¤¶à¤¾à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤‰à¤šà¥à¤š à¤¸à¥à¤•à¥‹à¤° à¤•à¤¾ à¤…à¤°à¥à¤¥ à¤¹à¥ˆ à¤¬à¥‡à¤¹à¤¤à¤° à¤‹à¤£ à¤¶à¤°à¥à¤¤à¥‡à¤‚à¥¤ à¤…à¤ªà¤¨à¥‡ à¤¸à¥à¤•à¥‹à¤° à¤•à¥€ à¤¨à¤¿à¤¯à¤®à¤¿à¤¤ à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€ à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤‡à¤¸à¥‡ à¤¸à¥à¤§à¤¾à¤°à¤¨à¥‡ à¤ªà¤° à¤•à¤¾à¤® à¤•à¤°à¥‡à¤‚à¥¤",
        ta: "à®‰à®™à¯à®•à®³à¯ à®•à®¿à®°à¯†à®Ÿà®¿à®Ÿà¯ à®¸à¯à®•à¯‹à®°à¯ à®‰à®™à¯à®•à®³à¯ à®•à®¿à®°à¯†à®Ÿà®¿à®Ÿà¯ à®¤à®•à¯à®¤à®¿à®¯à¯ˆà®•à¯ à®•à¯à®±à®¿à®•à¯à®•à®¿à®±à®¤à¯. à®…à®¤à®¿à®• à®¸à¯à®•à¯‹à®°à¯à®•à®³à¯ à®šà®¿à®±à®¨à¯à®¤ à®•à®Ÿà®©à¯ à®šà®²à¯à®•à¯ˆà®•à®³à¯ˆ à®…à®°à¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®©à¯à®±à®©. à®‰à®™à¯à®•à®³à¯ à®¸à¯à®•à¯‹à®°à¯ˆ à®¤à¯Šà®Ÿà®°à¯à®¨à¯à®¤à¯ à®•à®£à¯à®•à®¾à®£à®¿à®¤à¯à®¤à¯ à®…à®¤à¯ˆ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®µà®¤à®¿à®²à¯ à®•à®µà®©à®®à¯ à®šà¯†à®²à¯à®¤à¯à®¤à¯à®™à¯à®•à®³à¯.",
        te: "à°®à±€ à°•à±à°°à±†à°¡à°¿à°Ÿà± à°¸à±à°•à±‹à°°à± à°®à±€ à°•à±à°°à±†à°¡à°¿à°Ÿà± à°…à°°à±à°¹à°¤à°¨à± à°¸à±‚à°šà°¿à°¸à±à°¤à±à°‚à°¦à°¿. à°…à°§à°¿à°• à°¸à±à°•à±‹à°°à±â€Œà°²à± à°®à°‚à°šà°¿ à°²à±‹à°¨à± à°¨à°¿à°¬à°‚à°§à°¨à°²à°¨à± à°…à°°à±à°¥à°‚ à°šà±‡à°¸à±à°¤à°¾à°¯à°¿. à°®à±€ à°¸à±à°•à±‹à°°à±â€Œà°¨à± à°¨à°¿à°¯à°®à°¿à°¤à°‚à°—à°¾ à°ªà°°à±à°¯à°µà±‡à°•à±à°·à°¿à°‚à°šà°‚à°¡à°¿ à°®à°°à°¿à°¯à± à°¦à°¾à°¨à°¿à°¨à°¿ à°®à±†à°°à±à°—à±à°ªà°°à°šà°¡à°¾à°¨à°¿à°•à°¿ à°ªà°¨à°¿ à°šà±‡à°¯à°‚à°¡à°¿.",
        kn: "à²¨à²¿à²®à³à²® à²•à³à²°à³†à²¡à²¿à²Ÿà³ à²¸à³à²•à³‹à²°à³ à²¨à²¿à²®à³à²® à²•à³à²°à³†à²¡à²¿à²Ÿà³ à²¯à³‹à²—à³à²¯à²¤à³†à²¯à²¨à³à²¨à³ à²ªà³à²°à²¤à²¿à²¨à²¿à²§à²¿à²¸à³à²¤à³à²¤à²¦à³†. à²¹à³†à²šà³à²šà²¿à²¨ à²¸à³à²•à³‹à²°à³â€Œà²—à²³à³ à²‰à²¤à³à²¤à²® à²¸à²¾à²² à²¨à²¿à²¯à²®à²—à²³à²¨à³à²¨à³ à²…à²°à³à²¥à³ˆà²¸à³à²¤à³à²¤à²µà³†. à²¨à²¿à²®à³à²® à²¸à³à²•à³‹à²°à³ à²…à²¨à³à²¨à³ à²¨à²¿à²¯à²®à²¿à²¤à²µà²¾à²—à²¿ à²®à³‡à²²à³à²µà²¿à²šà²¾à²°à²£à³† à²®à²¾à²¡à²¿ à²®à²¤à³à²¤à³ à²…à²¦à²¨à³à²¨à³ à²¸à³à²§à²¾à²°à²¿à²¸à²²à³ à²•à³†à²²à²¸ à²®à²¾à²¡à²¿.",
        ml: "à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´•àµà´°àµ†à´¡à´¿à´±àµà´±àµ à´¸àµà´•àµ‹àµ¼ à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´•àµà´°àµ†à´¡à´¿à´±àµà´±àµ à´…àµ¼à´¹à´¤ à´ªàµà´°à´¤à´¿à´¨à´¿à´§à´¾à´¨à´‚ à´šàµ†à´¯àµà´¯àµà´¨àµà´¨àµ. à´‰à´¯àµ¼à´¨àµà´¨ à´¸àµà´•àµ‹àµ¼à´•àµ¾ à´®à´¿à´•à´šàµà´š à´²àµ‹àµº à´¨à´¿à´¬à´¨àµà´§à´¨à´•àµ¾ à´…àµ¼à´¥à´®à´¾à´•àµà´•àµà´¨àµà´¨àµ. à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´¸àµà´•àµ‹àµ¼ à´¨à´¿à´¯à´®à´¿à´¤à´®à´¾à´¯à´¿ à´¨à´¿à´°àµ€à´•àµà´·à´¿à´•àµà´•àµà´•à´¯àµà´‚ à´…à´¤àµ à´®àµ†à´šàµà´šà´ªàµà´ªàµ†à´Ÿàµà´¤àµà´¤à´¾àµ» à´ªàµà´°à´µàµ¼à´¤àµà´¤à´¿à´•àµà´•àµà´•à´¯àµà´‚ à´šàµ†à´¯àµà´¯àµà´•.",
        bn: "à¦†à¦ªà¦¨à¦¾à¦° à¦•à§à¦°à§‡à¦¡à¦¿à¦Ÿ à¦¸à§à¦•à§‹à¦° à¦†à¦ªà¦¨à¦¾à¦° à¦•à§à¦°à§‡à¦¡à¦¿à¦Ÿ à¦¯à§‹à¦—à§à¦¯à¦¤à¦¾ à¦ªà§à¦°à¦¤à¦¿à¦¨à¦¿à¦§à¦¿à¦¤à§à¦¬ à¦•à¦°à§‡à¥¤ à¦‰à¦šà§à¦š à¦¸à§à¦•à§‹à¦°à¦—à§à¦²à¦¿ à¦­à¦¾à¦² à¦‹à¦£ à¦¶à¦°à§à¦¤à¦¾à¦¬à¦²à§€ à¦®à¦¾à¦¨à§‡à¥¤ à¦†à¦ªà¦¨à¦¾à¦° à¦¸à§à¦•à§‹à¦° à¦¨à¦¿à¦¯à¦¼à¦®à¦¿à¦¤à¦­à¦¾à¦¬à§‡ à¦ªà¦°à§à¦¯à¦¬à§‡à¦•à§à¦·à¦£ à¦•à¦°à§à¦¨ à¦à¦¬à¦‚ à¦à¦Ÿà¦¿ à¦‰à¦¨à§à¦¨à¦¤ à¦•à¦°à¦¾à¦° à¦œà¦¨à§à¦¯ à¦•à¦¾à¦œ à¦•à¦°à§à¦¨à¥¤",
        mr: "à¤¤à¥à¤®à¤šà¤¾ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤¸à¥à¤•à¥‹à¤…à¤° à¤¤à¥à¤®à¤šà¥à¤¯à¤¾ à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ à¤ªà¤¾à¤¤à¥à¤°à¤¤à¥‡à¤šà¥‡ à¤ªà¥à¤°à¤¤à¤¿à¤¨à¤¿à¤§à¤¿à¤¤à¥à¤µ à¤•à¤°à¤¤à¥‹. à¤‰à¤šà¥à¤š à¤¸à¥à¤•à¥‹à¤…à¤°à¥à¤¸ à¤®à¥à¤¹à¤£à¤œà¥‡ à¤šà¤¾à¤‚à¤—à¤²à¥à¤¯à¤¾ à¤•à¤°à¥à¤œ à¤…à¤Ÿà¥€. à¤¤à¥à¤®à¤šà¤¾ à¤¸à¥à¤•à¥‹à¤…à¤° à¤¨à¤¿à¤¯à¤®à¤¿à¤¤à¤ªà¤£à¥‡ à¤®à¥‰à¤¨à¤¿à¤Ÿà¤° à¤•à¤°à¤¾ à¤†à¤£à¤¿ à¤¤à¥à¤¯à¤¾à¤µà¤° à¤¸à¥à¤§à¤¾à¤°à¤£à¤¾ à¤•à¤°à¤£à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤•à¤¾à¤® à¤•à¤°à¤¾.",
        gu: "àª¤àª®àª¾àª°à«‹ àª•à«àª°à«‡àª¡àª¿àªŸ àª¸à«àª•à«‹àª° àª¤àª®àª¾àª°à«€ àª•à«àª°à«‡àª¡àª¿àªŸ àªªàª¾àª¤à«àª°àª¤àª¾àª¨à«àª‚ àªªà«àª°àª¤àª¿àª¨àª¿àª§àª¿àª¤à«àªµ àª•àª°à«‡ àª›à«‡. àª‰àªšà«àªš àª¸à«àª•à«‹àª°à«àª¸ àªàªŸàª²à«‡ àª¸àª¾àª°à«€ àª²à«‹àª¨ àª¶àª°àª¤à«‹. àª¤àª®àª¾àª°à«‹ àª¸à«àª•à«‹àª° àª¨àª¿àª¯àª®àª¿àª¤àªªàª£à«‡ àª®à«‹àª¨àª¿àªŸàª° àª•àª°à«‹ àª…àª¨à«‡ àª¤à«‡àª¨à«‡ àª¸à«àª§àª¾àª°àªµàª¾ àªªàª° àª•àª¾àª® àª•àª°à«‹.",
        pa: "à¨¤à©à¨¹à¨¾à¨¡à¨¾ à¨•à©à¨°à©ˆà¨¡à¨¿à¨Ÿ à¨¸à¨•à©‹à¨° à¨¤à©à¨¹à¨¾à¨¡à©€ à¨•à©à¨°à©ˆà¨¡à¨¿à¨Ÿ à¨…à¨°à¨œà¨¼à©€à¨¤à¨¾ à¨¦à¨¾ à¨ªà©à¨°à¨¤à©€à¨¨à¨¿à¨§à¨¤à¨¾ à¨•à¨°à¨¦à¨¾ à¨¹à©ˆà¥¤ à¨‰à©±à¨š à¨¸à¨•à©‹à¨° à¨¬à¨¿à¨¹à¨¤à¨° à¨²à©‹à¨¨ à¨¸à¨¼à¨°à¨¤à¨¾à¨‚ à¨¦à¨¾ à¨®à¨¤à¨²à¨¬ à¨¹à©ˆà¥¤ à¨†à¨ªà¨£à©‡ à¨¸à¨•à©‹à¨° à¨¦à©€ à¨¨à¨¿à¨¯à¨®à¨¿à¨¤ à¨¨à¨¿à¨—à¨°à¨¾à¨¨à©€ à¨•à¨°à©‹ à¨…à¨¤à©‡ à¨‡à¨¸à¨¨à©‚à©° à¨¸à©à¨§à¨¾à¨°à¨¨ à¨²à¨ˆ à¨•à©°à¨® à¨•à¨°à©‹à¥¤"
      }
    };

    return guides[section]?.[selectedLanguage] || guides[section]?.en || "Audio guide not available for this section.";
  };

  useEffect(() => {
    // Load saved preferences
    const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
    const savedAudioEnabled = localStorage.getItem('audioEnabled') !== 'false';

    setSelectedLanguage(savedLanguage);
    setAudioEnabled(savedAudioEnabled);

    if (savedLanguage !== 'en') {
      i18n.changeLanguage(savedLanguage);
    }
  }, [i18n]);

  return (
    <div className="language-selector">
      <div className="language-controls">
        <div className="language-dropdown">
          <label>ğŸŒ Language:</label>
          <select
            value={selectedLanguage}
            onChange={(e) => changeLanguage(e.target.value)}
          >
            {languages.map(lang => (
              <option key={lang.code} value={lang.code}>
                {lang.flag} {lang.name}
              </option>
            ))}
          </select>
        </div>

        <div className="audio-toggle">
          <label>
            <input
              type="checkbox"
              checked={audioEnabled}
              onChange={toggleAudio}
            />
            ğŸ”Š Audio Guides
          </label>
        </div>
      </div>

      {audioEnabled && (
        <div className="audio-guides">
          <h4>ğŸ§ Quick Audio Guides</h4>
          <div className="guide-buttons">
            <button onClick={() => playAudioGuide('dashboard')}>
              ğŸ“Š Dashboard Guide
            </button>
            <button onClick={() => playAudioGuide('creditScore')}>
              ğŸ“ˆ Credit Score Guide
            </button>
          </div>
        </div>
      )}
    </div>
  );
}

export default LanguageSelector;